CC8E Version 1.3F,   File: lcd.c                7. Dec 2013   9:41   Page 1

ADDR   CODE       LINE  SOURCE

                  00001 
                  00002 ; CC8E Version 1.3F, Copyright (c) B Knudsen Data
                  00003 ; C compiler for the PIC18 microcontrollers
                  00004 ; ************   7. Dec 2013   9:41  *************
                  00005 
                  00006 	processor  PIC18F452
                  00007 	radix  DEC
                  00008 
       0FF4       00009 PRODH       EQU   0xFF4
       0FF3       00010 PRODL       EQU   0xFF3
       0FF2       00011 INTCON      EQU   0xFF2
       0002       00012 Zero_       EQU   2
       0FCF       00013 TMR1H       EQU   0xFCF
       0FCD       00014 T1CON       EQU   0xFCD
       0F94       00015 TRISC       EQU   0xF94
       0F93       00016 TRISB       EQU   0xF93
       0F92       00017 TRISA       EQU   0xF92
       0F82       00018 PORTC       EQU   0xF82
       0001       00019 INT0IF      EQU   1
       0007       00020 GIE         EQU   7
       007F       00021 sayac       EQU   0x7F
       007F       00022 sayac1      EQU   0x7F
       007F       00023 zaman       EQU   0x7F
       007F       00024 a           EQU   0x7F
       007F       00025 C2tmp       EQU   0x7F
       007F       00026 s           EQU   0x7F
       007F       00027 t           EQU   0x7F
       007F       00028 n           EQU   0x7F
                  00029 
000000 EF29 F000  00030 	GOTO main
                  00031 
                  00032   ; FILE lcd.c
                  00033 			;void init();
                  00034 			;void bekle(unsigned long t);
                  00035 			;/*void LcdInit();
                  00036 			;void LcdYaz(char );
                  00037 			;void LcdKomut(unsigned kom);
                  00038 			;void MesajYaz(const char *msj,unsigned adr);*/
                  00039 			;void ayarlar();
                  00040 			;void bekle_kesme(unsigned long a);
                  00041 			;void sifirla(unsigned long s);
                  00042 			;
                  00043 			;void kesme() //kesme gelince yapilacak komutlar, kesmede calisacak fonksiyon main fonksiyonunun ustunde yazilir...	
                  00044 			;{
                  00045 kesme
                  00046 			;    INTCON=0x90; // kesmeler acilir RBO/INT0 girisi interrupt enable edilir.
000004 0E90       00047 	MOVLW 144
000006 6EF2       00048 	MOVWF INTCON,0
                  00049 			;    INT0IF=0;  // yeni kesmeler gelmesi icin butona bagli olan INT0 portundaki interrupt flagi kapatilir.
000008 92F2       00050 	BCF   0xFF2,INT0IF,0
                  00051 			;	GIE=1;	//kesmeler acilir, yeni kesme gelmesine musade edilir	
00000A 8EF2       00052 	BSF   0xFF2,GIE,0
                  00053 			;    int sayac=0;
00000C 6A7F       00054 	CLRF  sayac,0
                  00055 			;    int sayac1=0;
00000E 6A7F       00056 	CLRF  sayac1,0
                  00057 			;    int zaman=0;
000010 6A7F       00058 	CLRF  zaman,0
                  00059 			;    while(TMR1H<=9){
000012 0E0A       00060 m001	MOVLW 10
CC8E Version 1.3F,   File: lcd.c                7. Dec 2013   9:41   Page 2

ADDR   CODE       LINE  SOURCE

000014 60CF       00061 	CPFSLT TMR1H,0
000016 D01C       00062 	BRA   m003
                  00063 			;	 T1CON=0b.0000.0101;//Timer baslatilir.
000018 0E05       00064 	MOVLW 5
00001A 6ECD       00065 	MOVWF T1CON,0
                  00066 			;	 nop();
00001C 0000       00067 	NOP  
                  00068 			;     sayac=TMR1H;
00001E CFCF F07F  00069 	MOVFF TMR1H,sayac
                  00070 			;	 T1CON=0b.0000.0000;//Timer durdurulur.
000022 6ACD       00071 	CLRF  T1CON,0
                  00072 			;	if(TMR1H>9){//9'dan sonra A yazmamasý için deger sifirlanir.
000024 0E09       00073 	MOVLW 9
000026 64CF       00074 	CPFSGT TMR1H,0
000028 D005       00075 	BRA   m002
                  00076 			;	            TMR1H=0b.0000;
00002A 6ACF       00077 	CLRF  TMR1H,0
                  00078 			;	            nop();
00002C 0000       00079 	NOP  
                  00080 			;	            PORTC=TMR1H;
00002E CFCF FF82  00081 	MOVFF TMR1H,PORTC
                  00082 			;	            break;
000032 D00E       00083 	BRA   m003
                  00084 			;             }
                  00085 			;     nop();
000034 0000       00086 m002	NOP  
                  00087 			;     sayac1=TMR1H;
000036 CFCF F07F  00088 	MOVFF TMR1H,sayac1
                  00089 			;     zaman=sayac1-sayac;
00003A 507F       00090 	MOVF  sayac,W,0
00003C 5C7F       00091 	SUBWF sayac1,W,0
00003E 6E7F       00092 	MOVWF zaman,0
                  00093 			;	 PORTC=zaman;
000040 C07F FF82  00094 	MOVFF zaman,PORTC
                  00095 			;	 bekle_kesme(1000);
000044 0EE8       00096 	MOVLW 232
000046 6E7F       00097 	MOVWF a,0
000048 0E03       00098 	MOVLW 3
00004A 6E7F       00099 	MOVWF a+1,0
00004C D806       00100 	RCALL bekle_kesme
                  00101 			;	 	}
00004E D7E1       00102 	BRA   m001
                  00103 			;}	
000050 0012       00104 m003	RETURN
                  00105 			;	
                  00106 			;
                  00107 			;bit e @ PORTE.0, rs @ PORTE.1, rw @ PORTE.2;
                  00108 			;unsigned disp @ PORTD;
                  00109 			;
                  00110 			;void main(){
                  00111 main
                  00112 			;    ayarlar();
000052 D826       00113 	RCALL ayarlar
                  00114 			;	INTCON=0x90;
000054 0E90       00115 	MOVLW 144
000056 6EF2       00116 	MOVWF INTCON,0
                  00117 			;	/*init();
                  00118 			;	LcdInit();*/
                  00119 			;  
                  00120 			;anadongu:
CC8E Version 1.3F,   File: lcd.c                7. Dec 2013   9:41   Page 3

ADDR   CODE       LINE  SOURCE

                  00121 			;/*	MesajYaz("\f zaman= %d,zaman ",0x80);
                  00122 			;	bekle(1500);
                  00123 			;	MesajYaz("application file    ",0x80);
                  00124 			;	bekle(1500);*/
                  00125 			;	
                  00126 			;goto anadongu;
000058 D7FF       00127 m004	BRA   m004
                  00128 			;}
                  00129 			;   	
                  00130 			;void bekle_kesme(unsigned long a)
                  00131 			;{
                  00132 bekle_kesme
                  00133 			;	for(a=1400*a;a>0;a--)
00005A 507F       00134 	MOVF  a+1,W,0
00005C 6E7F       00135 	MOVWF C2tmp+1,0
00005E 507F       00136 	MOVF  a,W,0
000060 6E7F       00137 	MOVWF C2tmp,0
000062 507F       00138 	MOVF  C2tmp,W,0
000064 0D78       00139 	MULLW 120
000066 CFF3 F07F  00140 	MOVFF PRODL,a
00006A CFF4 F07F  00141 	MOVFF PRODH,a+1
00006E 507F       00142 	MOVF  C2tmp+1,W,0
000070 0D78       00143 	MULLW 120
000072 50F3       00144 	MOVF  PRODL,W,0
000074 267F       00145 	ADDWF a+1,1,0
000076 507F       00146 	MOVF  C2tmp,W,0
000078 0D05       00147 	MULLW 5
00007A 50F3       00148 	MOVF  PRODL,W,0
00007C 267F       00149 	ADDWF a+1,1,0
00007E 507F       00150 m005	MOVF  a,W,0
000080 107F       00151 	IORWF a+1,W,0
000082 B4D8       00152 	BTFSC 0xFD8,Zero_,0
000084 D005       00153 	BRA   m006
                  00154 			;			nop();
000086 0000       00155 	NOP  
000088 067F       00156 	DECF  a,1,0
00008A 0E00       00157 	MOVLW 0
00008C 5A7F       00158 	SUBWFB a+1,1,0
00008E D7F7       00159 	BRA   m005
                  00160 			;}
000090 0012       00161 m006	RETURN
                  00162 			;
                  00163 			;void sifirla(unsigned long s)
                  00164 			;{
                  00165 sifirla
                  00166 			;	if(s>9)
000092 507F       00167 	MOVF  s+1,W,0
000094 A4D8       00168 	BTFSS 0xFD8,Zero_,0
000096 D002       00169 	BRA   m007
000098 0E0A       00170 	MOVLW 10
00009A 607F       00171 	CPFSLT s,0
                  00172 			;		TMR1H=0b.0000;
00009C 6ACF       00173 m007	CLRF  TMR1H,0
                  00174 			;}
00009E 0012       00175 	RETURN
                  00176 			;
                  00177 			;void ayarlar()
                  00178 			;{	
                  00179 ayarlar
                  00180 			;	GIE=1;			
CC8E Version 1.3F,   File: lcd.c                7. Dec 2013   9:41   Page 4

ADDR   CODE       LINE  SOURCE

0000A0 8EF2       00181 	BSF   0xFF2,GIE,0
                  00182 			;	TRISA=0xFF;
0000A2 6892       00183 	SETF  TRISA,0
                  00184 			;	TRISB=0xFF;
0000A4 6893       00185 	SETF  TRISB,0
                  00186 			;	TRISC=0x00;	
0000A6 6A94       00187 	CLRF  TRISC,0
                  00188 			;
                  00189 			;		
                  00190 			;}
0000A8 0012       00191 	RETURN
                  00192 			;/*void init()
                  00193 			;{
                  00194 			;	TRISD=0X00;
                  00195 			;	TRISE=0X00;
                  00196 			;}
                  00197 			;*/
                  00198 			;
                  00199 			;void bekle(unsigned long t)	//t milisaniye gecikme saðlar
                  00200 			;{
                  00201 bekle
                  00202 			;	unsigned n;
                  00203 			;	for(;t>0;t--)
0000AA 507F       00204 m008	MOVF  t,W,0
0000AC 107F       00205 	IORWF t+1,W,0
0000AE B4D8       00206 	BTFSC 0xFD8,Zero_,0
0000B0 D00C       00207 	BRA   m011
                  00208 			;		for(n=140;n>0;n--)
0000B2 0E8C       00209 	MOVLW 140
0000B4 6E7F       00210 	MOVWF n,0
0000B6 527F       00211 m009	MOVF  n,1,0
0000B8 B4D8       00212 	BTFSC 0xFD8,Zero_,0
0000BA D003       00213 	BRA   m010
                  00214 			;			nop();
0000BC 0000       00215 	NOP  
0000BE 067F       00216 	DECF  n,1,0
0000C0 D7FA       00217 	BRA   m009
0000C2 067F       00218 m010	DECF  t,1,0
0000C4 0E00       00219 	MOVLW 0
0000C6 5A7F       00220 	SUBWFB t+1,1,0
0000C8 D7F0       00221 	BRA   m008
                  00222 			;}
0000CA 0012       00223 m011	RETURN
                  00224 
                  00225 	END
                  00226 
                  00227 
                  00228 ; *** KEY INFO ***
                  00229 
                  00230 ; 0x0000AA   17 word(s)  0 % : bekle
                  00231 ; 0x0000A0    5 word(s)  0 % : ayarlar
                  00232 ; 0x00005A   28 word(s)  0 % : bekle_kesme
                  00233 ; 0x000092    7 word(s)  0 % : sifirla
                  00234 ; 0x000004   39 word(s)  0 % : kesme
                  00235 ; 0x000052    4 word(s)  0 % : main
                  00236 
                  00237 ; RAM usage: 0 bytes (0 local), 1536 bytes free
                  00238 ; Maximum call level: 1
                  00239 ; Total of 102 code words (0 %)
